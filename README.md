# Как запустить

```bash
# init
$ npm install

# watch mode
$ npm run start:dev

# production mode
$ npm run start:prod
```

> Статус проекта: ещё не работает

Поднять Монго БД в с помощью docker-compose

```bash
cp docker-compose.dev.yml docker-compose.yml
docker-compose up -d
```

Для подключения 1 админа

```mongosh
use admin -- admin название учетной записи ДБ
db.users.updateOne({ _id: ObjectId("USER_ID")},{ $set: { roles: ["admin"] } })
```

## Логирование

Для логирования используется библиотека `winston`. Логи сохраняются в папку `logs/`.
Логгируются http запросы и информация о запуске приложения и ошибки.

## API Документация

### Аутентификация

| Метод | Эндпоинт         | Описание                        | Требования    |
| ----- | ---------------- | ------------------------------- | ------------- |
| POST  | `/auth/register` | Регистрация нового пользователя | Логин, пароль |
| POST  | `/auth/login`    | Авторизация пользователя        | Логин, пароль |
| GET   | `/auth/logout`   | Выход из системы                | Токен в куках |

### Пользователи

| Метод  | Эндпоинт         | Описание                         | Требования            |
| ------ | ---------------- | -------------------------------- | --------------------- |
| GET    | `/users/me`      | Получение профиля текущего юзера | Аутентификация        |
| GET    | `/users/:id`     | Получение любого пользователя    | Аутентификация        |
| PUT    | `/users/:id`     | Обновление профиля               | Аутентификация        |
| DELETE | `/users/:id`     | Удаление профиля                 | Аутентификация        |
| GET    | `/users/all`     | Список всех пользователей        | Права admin           |

### Система

| Метод | Эндпоинт | Описание             | Требования |
| ----- | -------- | -------------------- | ---------- |
| GET   | `/statistics`      | Системная статистика | Нет        |

### Параметры

### Регистрация/Логин

- `login`: строка (обязательно)
- `password`: строка (мин. 8 символов)
- `email`: строка (опционально)

### Ответы

- Успех: HTTP 200 + JSON
- Ошибка: HTTP 4xx/5xx + сообщение

## Безопасность

- Куки `HttpOnly`, `Secure`
- Токен в `Authorization: Bearer`
- Требования к паролю: заглавные, цифры, спецсимволы
